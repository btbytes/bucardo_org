<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="" xml:lang="en" lang="en" dir="ltr">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>{PageTitle}Bucardo</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/css/common/shared.css";
			@import "/css/BucardoGreen/main-glossy.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="?303" />
		<!--[if lt IE 7]><meta http-equiv="imagetoolbar" content="no" /><![endif]-->
	</head>
<body class="mediawiki  ltr ">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="bodyContent">
			<div id="contentSub"></div>
			<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>The main <a href="/Bucardo" title="wikilink">Bucardo</a> schema is contained in the <strong>bucardo.schema</strong> file. This file is processed when running <em>bucardo_ctl install</em> to create the Bucardo control database. There are also some tables and functions that are created on the remote databases. All tables and functions are always in the ‘bucardo’ schema.</p>

<h2 id="main-bucardo-tables">Main Bucardo tables</h2>

<ul>
  <li><a href="/Bucardo/table/bucardo_config" title="wikilink">bucardo_config</a>
    <ul>
      <li>Holds global configuration information: use <strong>bucardo_ctl show all</strong> to view</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/db" title="wikilink">db</a>
    <ul>
      <li>Contains information about each replicated database. Use <strong>bucardo_ctl list dbs</strong> to view.</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/dbgroup" title="wikilink">dbgroup</a>
    <ul>
      <li>Contains the names of database groups. View with <strong>bucardo_ctl list dbgroups</strong>’</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/dbmap" title="wikilink">dbmap</a>
    <ul>
      <li>Maps databases to database groups (many to many)</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/goat" title="wikilink">goat</a>
    <ul>
      <li>Contains information on specific items to be replicated: tables or sequences. View with <strong>bucardo_ctl list goats</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/herd" title="wikilink">herd</a>
    <ul>
      <li>A group of goats is a herd: this contains the names of all herds. View with <strong>bucardo_ctl list herds</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/herdmap" title="wikilink">herdmap</a>
    <ul>
      <li>Maps goats to herds (many to many)</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/sync" title="wikilink">sync</a>
    <ul>
      <li>A single named replication event. Links a specific source herd to a remote database or database group. View with <strong>bucardo_ctl list syncs</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/customcode" title="wikilink">customcode</a>
    <ul>
      <li>Perl subroutines that fire at some point in the replication process. Contains code for conflict handling and exception handling. View with <strong>bucardo_ctl list codes</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/customcode_map" title="wikilink">customcode_map</a>
    <ul>
      <li>Maps customcodes to a specific sync or a goat</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/upgrade_log" title="wikilink">upgrade_log</a>
    <ul>
      <li>Populated when you run <strong>bucardo_ctl upgrade</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_rate" title="wikilink">bucardo_rate</a>
    <ul>
      <li>Track latency and speed of sync, when the “track_rates” column of a sync is set to true</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_custom_trigger" title="wikilink">bucardo_custom_trigger</a>
    <ul>
      <li>Allows replacement of the standard trigger for replication of only some rows in a table.</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_log_message" title="wikilink">bucardo_log_message</a>
    <ul>
      <li>Used internally for the messaging feature, e.g. <strong>bucardo_ctl message Foobar</strong></li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/q" title="wikilink">q</a>
    <ul>
      <li>Internal table used by Bucardo to coordinate active syncs</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/audit_pid" title="wikilink">audit_pid</a>
    <ul>
      <li>Lists the PIDs of active processes. No longer on by default.</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/db_connlog" title="wikilink">db_connlog</a>
    <ul>
      <li>A historical record of connection attempts to remote databases. Rarely used or needed.</li>
    </ul>
  </li>
</ul>

<h2 id="main-bucardo-functions">Main Bucardo functions</h2>

<ul>
  <li><a href="/Bucardo/function/bucardo_purge_q_table" title="wikilink">bucardo_purge_q_table(interval)</a></li>
  <li><a href="/Bucardo/function/validate_goat" title="wikilink">validate_goat()</a></li>
  <li><a href="/Bucardo/function/validate_sync" title="wikilink">validate_sync()</a></li>
  <li><a href="/Bucardo/function/validate_all_syncs" title="wikilink">validate_all_syncs()</a></li>
</ul>

<h2 id="remote-bucardo-tables">Remote Bucardo tables</h2>

<p>Each database that is used as a source for a <a href="/swap" title="wikilink">swap</a> or <a href="/pushdelta" title="wikilink">pushdelta</a> sync has the following tables installed into the bucardo schema:</p>

<ul>
  <li><a href="/Bucardo/table/bucardo_delta" title="wikilink">bucardo_delta</a>
    <ul>
      <li>Stores which rows have changed for each replicated table</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_track" title="wikilink">bucardo_track</a>
    <ul>
      <li>Stores which rows have been replicated to which remote targets</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_delta_targets" title="wikilink">bucardo_delta_targets</a>
    <ul>
      <li>Maps tables to remote databases</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_sequences" title="wikilink">bucardo_sequences</a>
    <ul>
      <li>Tracks current status of replicated sequences</li>
    </ul>
  </li>
  <li><a href="/Bucardo/table/bucardo_truncate_trigger" title="wikilink">bucardo_truncate_trigger</a>
<a href="/Bucardo/table/bucardo_truncate_trigger_log" title="wikilink">bucardo_truncate_trigger_log</a>
    <ul>
      <li>Tracks truncation of replicated tables</li>
    </ul>
  </li>
</ul>

<h2 id="remote-bucardo-functions">Remote Bucardo functions</h2>

<ul>
  <li><a href="/Bucardo/function/bucardo_purge_delta" title="wikilink">bucardo_purge_delta(interval)</a></li>
  <li><a href="/Bucardo/function/bucardo_compress_delta" title="wikilink">bucardo_compress_delta()</a></li>
  <li><a href="/Bucardo/function/bucardo_audit" title="wikilink">bucardo_audit()</a></li>
</ul>

</div>
			<div id='catlinks' class='catlinks catlinks-allhidden'></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div class="portlet" id="p-logo">
	<h2><a href="/"Array>bucardo.org</a></h2>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
</div>
</body></html>
